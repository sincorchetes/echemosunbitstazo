
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://sincorchetes.github.io/echemosunbitstazo/mastering-bash-condicionales/item/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.8">
    
    
      
        <title>Mastering en Bash - Condicionales - My Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mastering-en-bash-condicionales" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="My Docs" class="md-header__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Mastering en Bash - Condicionales
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="My Docs" class="md-nav__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    My Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../01.curso-de-python-imprimir-valores-y-funciones/item/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../about.md" class="md-nav__link">
        None
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://example.com/" class="md-nav__link">
        Issue Tracker
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="mastering-en-bash-condicionales">Mastering en Bash - Condicionales</h1>
<p>En esta entrega comenzaremos a ver los condicionales de los que disponemos en Bash. </p>
<p><strong>Off-Topic: Vamos a resumir los artículos y separarlos por subcontenidos para hacer más ágil su lectura, lo hemos aprendido el post anterior <a href="https://echemosunbitstazo.es/blog/mastering-bash-primero-scripting?target=_blank">Mastering en Bash ~ Primero de Scripting</a>, en el que hemos inyectado mucha cantidad de contenido de golpe a pesar de ser muy útil, puede parecer pesada su lectura.</strong></p>
<h1 id="que-es-un-condicional">¿Qué es un condicional?</h1>
<p>Imaginémonos que vamos a comprar el pan y resulta de que o bien no hay, o bien sale más caro de lo que imaginamos, o bien no es el tipo que buscamos...etc, entonces tenemos que pensar ¿Qué hacer? y aquí entra en juego el uso de los condicionales.</p>
<p>Los condicionales son evaulaciones que aplicamos en determinados valores que obtenemos como resultado de una operación anterior, bloques de código que han sido ejecutados y que han devuelto alguna salida. Es decir, con el if <strong>regularemos el flujo de trabajo de nuestro sript</strong>, añadiendo diferentes situaciones para resultados diferentes.</p>
<h1 id="if">If</h1>
<p>If permite añadir una situación diferente que en caso de que no se cumpla la condición, continuará ejecutando el resto del código. Este se puede elaborar en dentro de un script (<em>como haremos a partir de ahora</em>), o bien se puede ejecutar en una sola línea de ejecución en Bash.</p>
<p>Creamos un script dónde añadiremos el siguiente bloque de código.</p>
<pre><code>estado=&quot;Cerrado&quot;
parque=$estado

if [ $parque == &quot;Cerrado&quot;]
then
    echo &quot;Está cerrado&quot;
fi
</code></pre>
<p>Si ejecutamos el código de arriba, nos devolverá un mensaje de que se encuentra cerrado. Sin embargo, si cambiamos "Cerrado" =&gt; "Abierto". La cosa cambia, ya que no producirá una salida.</p>
<pre><code>estado=&quot;Cerrado&quot;
parque=$estado

if [ $parque == &quot;Cerrado&quot;]
then
    echo &quot;Está cerrado&quot;
fi
</code></pre>
<p>¿Por qué sucede esto? Porque como la condición no se cumple, ya que caracter-caracter se va comprobando que sean correctos dentro de la condición, en cuanto sea alguno de ellos distinto, se prosigue con el resto del código sin hacer nada al respecto. Si queremos decirle que ejecute otra instrucción de código utilizaremos la sentencia else.</p>
<pre><code>estado=&quot;Cerrado&quot;
parque=$estado

if [ $parque == &quot;Cerrado&quot;]
then
    echo &quot;Está cerrado&quot;
else
    echo &quot;Está abierto&quot;
fi
</code></pre>
<p>Pero... ¿Y si queremos añadir más condiciones? Un parque puede estar abierto, cerrado, en obras entre otras cosas. Para eso tenemos la sentencia if-elif</p>
<pre><code>estado=&quot;Abierto&quot;
parque=$estado

if [ $parque == &quot;Cerrado&quot;]
then
    echo &quot;Está cerrado&quot;
elif [ $parque == &quot;Abierto&quot; ]
then
    echo &quot;Está abierto&quot;
fi
</code></pre>
<p>Más estados...</p>
<pre><code>estado=&quot;Obras&quot;
parque=$estado

if [ $parque == &quot;Cerrado&quot;]
then
    echo &quot;Está cerrado&quot;
elif [ $parque == &quot;Abierto&quot; ]
then
    echo &quot;Está abierto&quot;
elif [ $parque == &quot;Obras&quot; ]
then
    echo &quot;Está en obras&quot;

else
    echo &quot;Consulte al ayuntamiento de su ciudad&quot;
fi
</code></pre>
<h2 id="condicional-en-una-simple-linea">Condicional en una simple linea</h2>
<p>Se pueden escribir condicionales en una sola línea, acortando todo el bloque de código en una sola instrucción reduciendo el consumo de memoria y de procesamiento, pero aumentando la complejidad de lectura para el desarrollador.</p>
<pre><code>if [ $parque == &quot;Cerrado&quot; ]; then  echo &quot;Está cerrado&quot; ; elif [ $parque == &quot;Abierto&quot; ]; then  echo &quot;Está abierto&quot; ; elif [ $parque == &quot;Obras&quot; ]; then echo &quot;Está en obras&quot; ; fi

</code></pre>
<h2 id="como-evalua-if-todo-esto">¿Cómo evalúa if todo esto?</h2>
<p>Los corchetes que incluimos como sintaxis del if, realmente esconden el comando <code>test(1)</code>. Este comando básicamente compara valores, por ejemplo:</p>
<pre><code>[ 2 -eq 0 ]
</code></pre>
<p>Si hacemos un <code>echo $?</code> para ver el resultado de la ejecución del comando, nos saldrá un 1 como señal de ARCHIVOALSE.</p>
<pre><code>[ 0 -eq 0 ]
</code></pre>
<p>Al hacer un <code>echo $?</code> nos mostrará el 0, de verdadero.</p>
<p>Lo mismo da utilizar los corchetes como llamar directamente al comando.</p>
<pre><code>test 0 -eq 0
</code></pre>
<p>Veremos el resultado de la ejecución del comando, recordemos 0 es éxito !=0 puede ser un error.</p>
<pre><code>echo $?
</code></pre>
<h3 id="tabla-de-expresiones-utilizadas">Tabla de expresiones utilizadas</h3>
<p>Las siguientes expresiones devuelven todas verdadero en su defecto en caso de que cumplan la condición. Para ver el resultado, hay que verificar la salida de la ejecución del comando con <code>echo $?</code></p>
<table>
<thead>
<tr>
<th>Expresión en terminal</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td>[ -a ARCHIVO ]</td>
<td>ARCHIVO existe</td>
</tr>
<tr>
<td>[ -b ARCHIVO ]</td>
<td>ARCHIVO existe y es un fichero especial de bloques</td>
</tr>
<tr>
<td>[ -c ARCHIVO ]</td>
<td>ARCHIVO existe y es archivo especial de caracteres</td>
</tr>
<tr>
<td>[ -d ARCHIVO ]</td>
<td>ARCHIVO existe y es un directorio</td>
</tr>
<tr>
<td>[ -e ARCHIVO ]</td>
<td>ARCHIVO existe</td>
</tr>
<tr>
<td>[ -f ARCHIVO ]</td>
<td>ARCHIVO existe y es un archivo regular</td>
</tr>
<tr>
<td>[ -g ARCHIVO ]</td>
<td>ARCHIVO existe y tiene el SGID asignado</td>
</tr>
<tr>
<td>[ -h ARCHIVO ]</td>
<td>ARCHIVO existe y es un enlace simbólico</td>
</tr>
<tr>
<td>[ -k ARCHIVO ]</td>
<td>ARCHIVO existe y tiene asignado <em>sticky bit</em></td>
</tr>
<tr>
<td>[ -p ARCHIVO ]</td>
<td>ARCHIVO existe y está nombrado como tubería (ARCHIVOIARCHIVOO)</td>
</tr>
<tr>
<td>[ -r ARCHIVO ]</td>
<td>ARCHIVO existe y tiene permisos de lectura</td>
</tr>
<tr>
<td>[ -s ARCHIVO ]</td>
<td>ARCHIVO existe y tiene un tamaño mayor que 0</td>
</tr>
<tr>
<td>[ -t ARCHIVO ]</td>
<td>La descripción del fichero de ARCHIVO está abierta y se refiere a una terminal</td>
</tr>
<tr>
<td>[ -u ARCHIVO ]</td>
<td>ARCHIVO existe y tiene SUID asignado</td>
</tr>
<tr>
<td>[ -w ARCHIVO ]</td>
<td>ARCHIVO existe y puede escribirse en él</td>
</tr>
<tr>
<td>[ -x ARCHIVO ]</td>
<td>ARCHIVO existe y es un ejecutable</td>
</tr>
<tr>
<td>[ -O ARCHIVO ]</td>
<td>ARCHIVO existe y está gestionado por su usario</td>
</tr>
<tr>
<td>[ -G ARCHIVO ]</td>
<td>ARCHIVO existe y está gestionado por su grupo</td>
</tr>
<tr>
<td>[ -L ARCHIVO ]</td>
<td>ARCHIVO existe y es enlace simbólico</td>
</tr>
<tr>
<td>[ -N ARCHIVO ]</td>
<td>ARCHIVO existe y se modificó desde la última vez que se leyó</td>
</tr>
<tr>
<td>[ -S ARCHIVO ]</td>
<td>ARCHIVO existe y es un socket</td>
</tr>
<tr>
<td>[ ARCHIVO1 -nt ARCHIVO2 ]</td>
<td>ARCHIVO1 se modificó antes que ARCHIVO2, o si ARCHIVO1 existe y ARCHIVO2 no</td>
</tr>
<tr>
<td>[ ARCHIVO1 -ot ARCHIVO2 ]</td>
<td>ARCHIVO1 es más viejo que ARCHIVO2, o ARCHIVO2 existe y ARCHIVO1 no</td>
</tr>
<tr>
<td>[ ARCHIVO1 -ef ARCHIVO2 ]</td>
<td>ARCHIVO1 y ARCHIVO2 se refieren al mismo dispositivo y número de inodo</td>
</tr>
<tr>
<td>[ -o OPNAME ]</td>
<td>Si la shell tiene la opción "OPTIONNAME" activdada <code>bash -o</code></td>
</tr>
<tr>
<td>[ -z STRING ]</td>
<td>La longitud del STR es 0</td>
</tr>
<tr>
<td>[ -n STRING ]  ó [ STRING ]</td>
<td>Si la longitud de STRING no es 0</td>
</tr>
<tr>
<td>[ STR1 == STR2 ] ó [ STR1 = STR2 ]</td>
<td>Si las cadenas son iguales</td>
</tr>
<tr>
<td>[ STR1 != STR2 ]</td>
<td>Si las cadenas no son iguales</td>
</tr>
<tr>
<td>[ STR1 &lt; STR2 ]</td>
<td>STR1 se ordena antes que STR2 según como esté la localización configurada</td>
</tr>
<tr>
<td>[ STR1 &gt; STR2 ]</td>
<td>STR1 ordena después de STR2 en base al idioma del sistema</td>
</tr>
</tbody>
</table>
<h3 id="expresiones-para-numeros">Expresiones para números</h3>
<p>Las siguientes condiciones solo son aplicables para números enteros, y devolverán verdadero en caso de cumplir la condición.</p>
<table>
<thead>
<tr>
<th>Expresión en terminal</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td>[ N1 -eq N2 ]</td>
<td>N1 es igual que N2</td>
</tr>
<tr>
<td>[ N1 -ne N2 ]</td>
<td>N1 no es igual a N2</td>
</tr>
<tr>
<td>[ N1 -lt N2 ]</td>
<td>N1 es menor que N2</td>
</tr>
<tr>
<td>[ N1 -le N2 ]</td>
<td>N1 es menor o igual que N2</td>
</tr>
<tr>
<td>[ N1 -gt N2 ]</td>
<td>N1 es mayor que N2</td>
</tr>
<tr>
<td>[ N1 -ge N2 ]</td>
<td>N1 es mayor o igual que N2</td>
</tr>
</tbody>
</table>
<h3 id="comparando-multiples-valores">Comparando múltiples valores</h3>
<p>Se pueden anidar condiciones para un determinado valor o conjunto de valores como podemos ver a continuación gracias a los operadores lógicos.</p>
<p><code>cmd1 &amp;&amp; cmd2</code> =&gt; Si devuelve 0 (éxito), se ejecutará <code>cmd2</code>
<code>cmd1 || cmd2</code> =&gt; Si devuelve un número distinto a 0, se ejecutará <code>cmd2</code></p>
<table>
<thead>
<tr>
<th>Expresión en terminal</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td>[[ VAL1 -eq VAL2 &amp;&amp; VAL3 -lt VAL1 ]]</td>
<td>Si el VAL1 es igual a VAL2 y a su vez, VAL3 es menor que VAL1, devolverá verdadero</td>
</tr>
<tr>
<td>[[ VAL1 == VAL2</td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="referencias">Referencias</h1>
<ul>
<li>Ediciones ENI ~ Tercera edición LPIC-I</li>
<li>The Linux Documentation Project ~ <a href="https://www.tldp.org/LDP/abs/html?target=_blank">TLDP</a></li>
<li>Linux Man Pages ~ <code>help if</code></li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.76f349be.min.js"></script>
      
    
  </body>
</html>